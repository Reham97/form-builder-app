<div class="container">
  <h2>Available Fields</h2>
  <div cdkDropList [cdkDropListData]="availableFields" class="field-list" cdkDropListConnectedTo="formFieldsList"
    [cdkDropListSortingDisabled]="true">
    <div *ngFor="let field of availableFields" cdkDrag class="field-item">
      {{ field.label }} ({{ field.type }})
    </div>
  </div>

  <h2>Form Builder</h2>
  <div cdkDropList #formFieldsList="cdkDropList" [cdkDropListData]="formFields" (cdkDropListDropped)="drop($event)"
    class="form-builder" id="formFieldsList">
    <div *ngFor="let field of formFields; let i = index" class="form-field" [class.selected]="i === selectedFieldIndex"
      (click)="selectField(i)">
      <strong>{{ field.label }}</strong> ({{ field.type }})
      <span *ngIf="field.required" style="color: red;">*</span>
    </div>
  </div>

  <div class="field-properties" *ngIf="selectedField as field">
    <h3>Edit Field Properties</h3>

    <label>
      Label:
      <input [(ngModel)]="field.label" />
    </label>

    <label>
      Required:
      <input type="checkbox" [(ngModel)]="field.required" />
    </label>

    <div *ngIf="field.type === 'select' || field.type === 'radio'">
      <label>Options (comma separated):</label>
      <input [value]="field.options?.join(', ')" (input)="updateOptionsFromEvent(field, $event)" />
    </div>
  </div>

  <button (click)="exportJSON()">Export JSON</button>

  <!-- Import JSON Button -->
  <button (click)="jsonFileInput.click()">Import JSON</button>

  <!-- Hidden file input -->
  <input #jsonFileInput type="file" accept=".json" style="display: none" (change)="handleJsonImport($event)">

</div>